/** @jsxImportSource @emotion/react */
import React from "react";
import Topbar from "../components/topbar"
import CopyIcon from "../assents/images/copy.png"
import axios from "axios"
import { useNavigate } from 'react-router-dom';

const Daily = ({date, summary}) => {
  return (
    <div css={{
      width: '100%',
      padding: '15px 7px 5px 0',
    }}>
      <div css={{
        display: 'flex',
        justifyContent: 'space-between',
      }}>
        <div css={{
          display: 'flex',
        }}>
          ğŸ¤–
          <div css={{
            padding: '0 0 0 4px'
          }}>
            {date}
          </div>
        </div>
        <img alt='copy' css={{
          width: '24px',
          height: '24px',
        }} src={CopyIcon} />
      </div>
      <ul css={{margin: 0}}>
        {summary.map((v) => <li>{v}</li>)}
      </ul>
      <div css={{
        display: 'flex',
        flexDirection: 'row-reverse'
      }}>
      </div>
    </div>
  )
}

const Seperator = () => {
  return (
    <div css={{
      height: '1px',
      width: '100%',
      padding: '10px',
    }}>
      <div css={{
        height: '1px',
        width: '100%',
        backgroundColor: '#ABABAB',
      }}>

      </div>
    </div>
  )
}

const App = ({iid, token}) => {
  const navigate = useNavigate()
  const [chats, setChats] = React.useState([])
  /*
  {
    "id": 2,
    "name": "ë””ìŠ¤ì½°ì´ì—‡",
    "created_at": "2023-02-18T07:16:27.624863+09:00",
    "daily_chats": [
        {
            "id": 8,
            "summary_text": "ì›¹ì•± ìš´ì˜ì— ëŒ€í•œ ì§ˆë¬¸\në¬´ë£Œë²„ì „ì˜ ì›¹ì‚¬ì´íŠ¸ë„ ì›¹ì•± í˜•íƒœë¡œ ë§Œë“¤ì–´ì„œ ì›¹í‘¸ì‹œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ì§ˆë¬¸\nPWA ì•±ê³¼ ì›¹í‘¸ì‹œì— ëŒ€í•œ ëŒ€í™”\nPWAë‚˜ ì›¹í‘¸ì‹œëŠ” iOSì—ì„œ êµ¬í˜„ì´ ì•ˆ ë˜ëŠ” ê²ƒ ê°™ë‹¤ëŠ” ì˜ê²¬\niOS 16ì—ì„œëŠ” PWAë‚˜ ì›¹í‘¸ì‹œë¥¼ ì§€ì›í•œë‹¤ëŠ” ê¸€ì„ ë¸”ë¡œê·¸ì—ì„œ ë°œê²¬í•œ ì´ì•¼ê¸°\nì›¹ì‚¬ì´íŠ¸ ì œì‘ê³¼ iOS ì§€ì›ì— ëŒ€í•œ ê³ ë¯¼\nì›¹ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ì–´ ì˜ˆì•½ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë¯¼ ì¤‘\niOS 16.4ê°€ ì¶œì‹œë˜ì–´ë„ ì‚¬ìš©ìë“¤ì´ ì—…ë°ì´íŠ¸ë¥¼ ì•ˆ í•˜ë©´ ì›¹í‘¸ì‹œë¥¼ ëª» ë°›ì„ ìˆ˜ë„ ìˆë‹¤ëŠ” ì˜ê²¬\nìƒë‹´ì†Œ ì´ìš©ì ëŒ€ìƒì´ íŠ¸ë¯¼í•œ ë¶„ë“¤ì´ë¼ì„œ iOS ì‚¬ìš©ì´ ì ì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ê²¬\ní”Œë ˆì–´ë ˆì¸ì„ ì´ìš©í•˜ë©´ ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°",
            "level": 3,
            "created_at": "2023ë…„ 02ì›” 18ì¼"
        },
        {
            "id": 7,
            "summary_text": "ê°œë°œ ê´€ë ¨ ë‰´ìŠ¤\nìŠ¤í…Œì´ë¸” ë””í“¨ì „ì˜ ìƒˆë¡œìš´ ì˜ìƒ ìƒì„± AI ì¶œì‹œ\nì±—GPTê°€ ì´ˆëŒ€í˜• ë°ì´í„°ì„¼í„°ì—ì„œ ê°œë°œë¨\nëŒ€í‘œ ìœ ë‹ˆì½˜ì¸ ì¬ìŠ¤í¼, ìƒì„±AI ì´ìš©í•œ ê¸°ì—…ìš© ì œí’ˆêµ° ì¶œì‹œ\nAIì˜ ì˜í–¥ê³¼ í™œìš© ê´€ë ¨ ë‰´ìŠ¤\nì¸ê³µì§€ëŠ¥ì„ ì´ìš©í•œ í”„ë¡œê·¸ë¨ ì±— GPTì˜ ëŒ€ì„¸\nAIê°€ ì¼ê³¼ ì§ì—…ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ë°œí‘œ\nì±—GPTë¥¼ ì´ìš©í•œ ì˜í•™ë…¼ë¬¸ ì‘ì„± ë° ì—…ìŠ¤í…Œì´ì§€ì˜ ê°€ìƒì¸í„´ í™œìš© ë“± AIì˜ í™œìš© ê°€ëŠ¥ì„± ë…¼ì˜\në¬¸í•™ ì‘í’ˆê³¼ AI ê´€ë ¨ ë‰´ìŠ¤\nì–‘ì‚°í˜• AIë¬¸í•™ì‘ê°€ì™€ ì°¨ë³„í™” ê°€ëŠ¥ì„± ë…¼ì˜\nAIë¥¼ ì´ìš©í•œ ìŠ¤í† ë¦¬ ê²Œì„ê³¼ ê°™ì€ AIì˜ í™œìš© ê°€ëŠ¥ì„±\në¬¸í•™ ì‘í’ˆì˜ ì •ì˜ì™€ AIì— ëŒ€í•œ ë…¼ì˜",
            "level": 3,
            "created_at": "2023ë…„ 02ì›” 17ì¼"
        },
        {
            "id": 6,
            "summary_text": "ì•± ë°ì´í„° ì¸¡ì • ë°©ë²•\ní”Œë ˆì´ìŠ¤í† ì–´ì— ì¶œì‹œí•œ ì•± ì‚¬ìš©ìë“¤ì˜ ë°ì´í„°(DAU, MAU)ë¥¼ ì¸¡ì •í•˜ë ¤ë©´ ë³„ë„ì˜ íˆ´ì„ ì‚¬ìš©í•´ì•¼ í•¨\níŒŒì´ì–´ë² ì´ìŠ¤ ì–´ë‚¼ë¦¬í‹±ìŠ¤ë‚˜ êµ¬ê¸€ ì• ë„ë¦¬í‹±ìŠ¤ë¥¼ í™œìš©í•˜ë©´ ì‰½ê²Œ ì¸¡ì • ê°€ëŠ¥\nì›¹ì•±ì˜ ê²½ìš° êµ¬ê¸€ ì• ë„ë¦¬í‹±ìŠ¤ë§Œ ì‚¬ìš©í•´ë„ ì§€ìˆ˜ë¥¼ ì‰½ê²Œ ì–»ì„ ìˆ˜ ìˆìŒ\nì–´ì›¨ì´í°ì˜ macOS ë²„ì „ ì¶œì‹œ\nì–´ì›¨ì´í°ì˜ macOS ë²„ì „ì´ ì¶œì‹œë˜ì–´ ìƒì‚°ì„± í–¥ìƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆìŒ\níƒ€ì´ë¨¸ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì–´ ë”ìš± í¸ë¦¬í•¨\nì˜¨ë³´ë”©ì´ ê·€ì—½ê³  ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œ ìˆ˜ì •ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ\nìœ ìš©í•œ ì„œë¹„ìŠ¤ ì†Œê°œ\nêµ¬ê¸€ì‹œíŠ¸ë‚˜ DBì—ì„œ ì§ì ‘ ë°œì†¡ë˜ëŠ” ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ìë™í™” ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ì„œë¹„ìŠ¤ë¥¼ ì†Œê°œí•¨\në…¸ì½”ë“œë°©ì—ì„œ ì´ ì„œë¹„ìŠ¤ë¥¼ ì•Œì•„ë´¤ê³  ì¢‹ì•„ë³´ì„",
            "level": 3,
            "created_at": "2023ë…„ 02ì›” 16ì¼"
        },
        {
            "id": 5,
            "summary_text": "ì§ˆë¬¸ ë‚´ìš©\ní¬ë¼ìš°ë“œ í€ë”© ì œí’ˆ ìƒì„¸í˜ì´ì§€ ì™¸ì£¼ ì—…ì²´ êµ¬í•˜ê¸°\nì—…ì²´ê°€ ìë£Œ í™•ì¸ì„ ì§€ì—°í•˜ì—¬ ì˜ì•„í•¨ì„ ëŠë¼ëŠ” ìƒí™©\në””ìì¸ ê³„ì—´ ì—…ì²´ì˜ ë°˜ì‘ì— ëŒ€í•œ ì˜ë¬¸ì \nì‘ë‹µ ë‚´ìš©\nê¸‰í•œ ìƒí™©ì´ë¼ë©´ ì „í™”ë¥¼ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ëŠ” ì¡°ì–¸\nìë£Œë¥¼ ì „ë‚  ë³´ë‚´ê³  ë‹¹ì¼ í™•ì¸í•˜ì§€ ì•Šì•˜ë‹¤ê³  ë°”ë¡œ ë¶ˆì„±ì‹¤í•¨ì„ ìš´í•˜ëŠ” ê²ƒì€ ì´ë¥´ë‹¤ëŠ” ì¡°ì–¸\nì—…ì²´ê°€ ë°”ì´ì—…ì²´ì¼ ìˆ˜ ìˆë‹¤ëŠ” ì¶”ì¸¡\nì—…ì²´ê°€ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ë™ì‹œì— ì§„í–‰í•˜ë‹¤ë³´ë‹ˆ ìë£Œ í™•ì¸ì´ ì§€ì—°ë  ìˆ˜ ìˆë‹¤ëŠ” ì˜ê²¬\nì´ë©”ì¼ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì—ì„œëŠ” ë³´í†µ 1ì˜ì—…ì¼ ë‚´ë¡œ íšŒì‹ ì„ ë°›ëŠ”ë‹¤ëŠ” ê²½í—˜ì„ ì–¸ê¸‰\nì»¤ë®¤ë‹ˆí‹° ë§¤ë‹ˆì € ì—…ë¬´ì™€ íŠ¹ì§•, í‰ê·  ì—°ë´‰ ë“±ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹¤ë£¬ ê¸€ì„ ì†Œê°œí•˜ë©° ê´€ì‹¬ì´ ìˆëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤ëŠ” ë‚´ìš©",
            "level": 3,
            "created_at": "2023ë…„ 02ì›” 15ì¼"
        },
        {
            "id": 4,
            "summary_text": "ì§ˆë¬¸ ë‚´ìš©\ní¬ë¼ìš°ë“œ í€ë”© ì œí’ˆ ìƒì„¸í˜ì´ì§€ ì™¸ì£¼ ì—…ì²´ êµ¬í•˜ê¸°\nì—…ì²´ê°€ ìë£Œ í™•ì¸ì„ ì§€ì—°í•˜ì—¬ ì˜ì•„í•¨ì„ ëŠë¼ëŠ” ìƒí™©\në””ìì¸ ê³„ì—´ ì—…ì²´ì˜ ë°˜ì‘ì— ëŒ€í•œ ì˜ë¬¸ì \nì‘ë‹µ ë‚´ìš©\nê¸‰í•œ ìƒí™©ì´ë¼ë©´ ì „í™”ë¥¼ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ëŠ” ì¡°ì–¸\nìë£Œë¥¼ ì „ë‚  ë³´ë‚´ê³  ë‹¹ì¼ í™•ì¸í•˜ì§€ ì•Šì•˜ë‹¤ê³  ë°”ë¡œ ë¶ˆì„±ì‹¤í•¨ì„ ìš´í•˜ëŠ” ê²ƒì€ ì´ë¥´ë‹¤ëŠ” ì¡°ì–¸\nì—…ì²´ê°€ ë°”ì´ì—…ì²´ì¼ ìˆ˜ ìˆë‹¤ëŠ” ì¶”ì¸¡\nì—…ì²´ê°€ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ë™ì‹œì— ì§„í–‰í•˜ë‹¤ë³´ë‹ˆ ìë£Œ í™•ì¸ì´ ì§€ì—°ë  ìˆ˜ ìˆë‹¤ëŠ” ì˜ê²¬\nì´ë©”ì¼ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì—ì„œëŠ” ë³´í†µ 1ì˜ì—…ì¼ ë‚´ë¡œ íšŒì‹ ì„ ë°›ëŠ”ë‹¤ëŠ” ê²½í—˜ì„ ì–¸ê¸‰\nì»¤ë®¤ë‹ˆí‹° ë§¤ë‹ˆì € ì—…ë¬´ì™€ íŠ¹ì§•, í‰ê·  ì—°ë´‰ ë“±ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹¤ë£¬ ê¸€ì„ ì†Œê°œí•˜ë©° ê´€ì‹¬ì´ ìˆëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤ëŠ” ë‚´ìš©",
            "level": 3,
            "created_at": "2023ë…„ 02ì›” 14ì¼"
        },
        {
            "id": 3,
            "summary_text": "List 1: ê³ ë¯¼ ë‚´ìš©\ní”„ë¡ íŠ¸ì—”ë“œ í¬ë§ 4í•™ë…„ ì¬í•™ìƒì´ë©°, 1ê°œì›”ê°„ ì§„í–‰ëœ í”„ë¡œì íŠ¸ë¥¼ ë§ˆê°í–ˆìŒ\ní”„ë¡œì íŠ¸ì—ì„œ ë¦¬íŒ©í† ë§ì„ í•˜ì§€ ëª»í–ˆìœ¼ë©°, ì´ë ¥ì„œì— ì¶”ê°€í•˜ê¸° ìœ„í•´ ê³ ë¯¼ ì¤‘\nìƒˆ í”„ë¡œì íŠ¸ë¥¼ í•˜ëŠ” ê²ƒê³¼ ê¸°ì¡´ í”„ë¡œì íŠ¸ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ê°œì„ í•˜ëŠ” ê²ƒ ì¤‘ ê³ ë¯¼ ì¤‘\nList 2: ë‹¤ë¥¸ ê³ ë¯¼ ë‚´ìš©\nê¸°ì¡´ í”„ë¡œì íŠ¸ê°€ ë°°í¬ ì¤‘ë‹¨ë˜ê³  ì‚¬ìš©ìê°€ ì—†ì–´ ê³ ë¯¼ ì¤‘\nì™¸ë¶€ì—ì„œ ìŠ¤í„°ë”” 1ê°œ, í”„ë¡œì íŠ¸ 1ê°œ, ë™ì•„ë¦¬ 1ê°œ ì¶”ê°€ë¡œ ì‹œì‘ ì˜ˆì •\nì´ë ¥ì„œ ì“°ê¸° ìœ„í•œ ì‹œê°„ ì ˆê°ì„ ê³ ë ¤í•´ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ í•˜ëŠ” ê²ƒì„ ê³ ë¯¼í•¨\nList 3: í”„ë¡œì íŠ¸ ì¡°ì–¸\nìƒˆ í”„ë¡œì íŠ¸ë¥¼ í•˜ëŠ” ì´ìœ ëŠ” ê²½í—˜ì„ ìƒˆë¡­ê²Œ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸\nê¸°ì¡´ í”„ë¡œì íŠ¸ì—ì„œ ë¦¬íŒ©í† ë§ì„ ì‹œë„í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ì„ íƒì¼ ìˆ˜ ìˆìŒ\në¦¬íŒ©í† ë§ì„ í•˜ì§€ ëª»í•œ ì´ìœ ì™€ íŒ€ì›ì„ ì„¤ë“í•˜ëŠ” ê³¼ì •, ê°œì„  ì‚¬í•­ ë“±ì„ ì¸í„°ë·°ì—ì„œ ì–¸ê¸‰í•˜ë©´ ë©´ì ‘ì—ì„œ ë” ë§ì€ ì´ì•¼ê¸°ë¥¼ í•  ìˆ˜ ìˆìŒ",
            "level": 3,
            "created_at": "2023ë…„ 02ì›” 13ì¼"
        }
    ]
  }
  */
  React.useEffect(() => {
    axios.get(`http://channel.jseoplim.com/api/chat-rooms/${iid}`, {
      params: {}, 
      headers: {
      'Authorization': `Token ${token}`
      }
    }).then(v => { setChats(v) })
  }, [token, iid])

  return (
    <div css={{
      width: '100%',
      height: '100%',
    }}>
      <Topbar title={'ë””ìŠ¤ì½°ì´ì—‡'}/>
      <div css={{
        padding: '10px 24px 128px 24px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        flexDirection: 'column',
      }}>
        <div css={{
          backgroundColor: '#16C7EE',
          height: '54px',
          width: '100%',
          borderRadius: '6px',
          display: 'flex',
          alignItems: 'center',
          color: 'white',
          justifyContent: 'space-between',
          padding: '0 14px',
        }}>
          <div css={{
            fontWeight: '500',
          }}>
            ìµœê·¼ ë¶ˆëŸ¬ì˜¨ ì¼ì | 2ì›” 18ì¼
          </div>
          <div css={{
            fontWeight: 'bold',
          }} onClick={() => {
            navigate('/add')
          }}>
            ë” ë¶ˆëŸ¬ì˜¤ê¸°
          </div>
        </div>
        {chats.daily_chats.map(v => <React.Fragment><Daily date={v.created_at} summary={v.summary_text.split('\n')}/><Seperator /></React.Fragment>
        )}
        
      </div>
    </div>
  )
}

export default App;